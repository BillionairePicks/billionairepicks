<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
<script>
  // Firebase Config
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAsSHeTgN10bkdywhlJoi_p4ni7bxUAm6c",
  authDomain: "stat-stake.firebaseapp.com",
  projectId: "stat-stake",
  storageBucket: "stat-stake.firebasestorage.app",
  messagingSenderId: "128167594111",
  appId: "1:128167594111:web:20d36adbae750494efd74a",
  measurementId: "G-H4HSTHZXX1"
};
  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // ðŸ”’ Keep user logged in
  auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
    .then(() => {
      document.getElementById("login-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;

        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            alert("Welcome back " + email);
            window.location.href = "../index.html"; // redirect to homepage
          })
          .catch((error) => {
            alert(error.message);
          });
      });
    })
    .catch((error) => {
      console.error("Persistence error:", error.message);
    });

  // âœ… Auto redirect if already logged in
  auth.onAuthStateChanged((user) => {
    if (user) {
      window.location.href = "../index.html";
    }
  });
</script>
